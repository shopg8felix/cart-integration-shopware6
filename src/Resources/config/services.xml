<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd">
    <parameters>
        <parameter key="shopgate.action.whitelist" type="collection">
            <parameter key="enable_get_settings">true</parameter>
            <parameter key="enable_get_categories">true</parameter>
            <parameter key="enable_get_customer">true</parameter>
            <parameter key="enable_get_items">true</parameter>
            <parameter key="enable_register_customer">true</parameter>
            <parameter key="enable_check_cart">true</parameter>
        </parameter>
    </parameters>
    <services>
        <defaults autoconfigure="true" autowire="true"/>
        <service id="Shopgate\Shopware\Components\ConfigManager\ConfigReader">
            <argument type="service" id="Shopware\Core\System\SystemConfig\SystemConfigService"/>
            <argument type="service" id="system_config.repository" />
        </service>
        <service id="Shopgate\Shopware\Catalog\Categories"/>
        <service id="Shopgate\Shopware\Catalog\Products"/>
        <service id="Shopgate\Shopware\Customer\CustomerComposer"/>
        <service id="Shopgate\Shopware\System\Configuration\ConfigBridge">
            <argument type="service" id="plugin.repository"/>
            <argument type="string">%kernel.shopware_version%</argument>
            <argument type="service" id="Shopgate\Shopware\Storefront\ContextManager"/>
        </service>
        <service id="Shopgate\Shopware\Customer\CustomerBridge">
            <argument type="service" id="customer_group.repository"/>
            <argument type="service" id="Shopgate\Shopware\Storefront\ContextManager"/>
            <argument type="service" id="Shopware\Core\Checkout\Customer\SalesChannel\LoginRoute"/>
            <argument type="service" id="Shopware\Core\Framework\Validation\DataBag\RequestDataBag"/>
        </service>
        <service id="Shopgate\Shopware\Catalog\Mapping\ProductMapFactory"/>
        <service id="Shopgate\Shopware\Catalog\Products\ProductProperties">
            <argument type="service" id="property_group.repository"/>
        </service>
        <service id="Shopgate\Shopware\Catalog\Products\ProductSorting">
            <argument type="service" id="product_sorting.repository"/>
        </service>
        <service id="Shopgate\Shopware\Customer\Mapping\SalutationMapping">
            <argument type="service" id="salutation.repository"/>
            <argument type="service" id="Shopgate\Shopware\Storefront\ContextManager"/>
        </service>
        <service id="Shopgate\Shopware\System\Tax\TaxBridge">
            <argument type="service" id="tax.repository"/>
            <argument type="service" id="tax_rule.repository"/>
            <argument type="service" id="tax_rule_type.repository"/>
            <argument type="service" id="Shopgate\Shopware\Storefront\ContextManager"/>
        </service>
        <service id="Shopgate\Shopware\System\Tax\TaxComposer" />
        <service id="Shopgate\Shopware\Customer\Mapping\AddressMapping"/>
        <service id="Shopgate\Shopware\Customer\Mapping\GroupMapping"/>
        <service id="Shopgate\Shopware\Customer\Mapping\LocationMapping">
            <argument type="service" id="country.repository"/>
            <argument type="service" id="country_state.repository"/>
            <argument type="service" id="Shopgate\Shopware\Storefront\ContextManager"/>
        </service>
        <service id="Shopgate\Shopware\ExportService"/>
        <service id="Shopgate\Shopware\ImportService"/>
        <service id="Shopgate\Shopware\Order\OrderComposer"/>
        <service id="Shopgate\Shopware\Utility\Logger"/>
        <service id="Shopgate\Shopware\Storefront\ContextManager">
            <argument type="service" id="Shopware\Core\System\SalesChannel\Context\SalesChannelContextService"/>
        </service>
        <service id="Shopware\Core\Framework\Validation\DataBag\RequestDataBag"/>
        <!-- Public (needed for controllers and classes instantiated via Facade class -->
        <service id="Shopgate\Shopware\System\Di\Forwarder" public="true"/>
        <service id="Shopgate\Shopware\Storefront\Controller\MainController" public="true"/>
        <!-- Interfaces -->
        <service id="Shopgate\Shopware\Utility\LoggerInterface" alias="Shopgate\Shopware\Utility\Logger"/>
        <service id="Shopgate\Shopware\Components\ConfigManager\ConfigReaderInterface"
                 alias="Shopgate\Shopware\Components\ConfigManager\ConfigReader"/>
    </services>
</container>
